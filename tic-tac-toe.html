<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tic-Tac-Toe Game</title>
    <link rel="stylesheet" href="./TIC.css">
    <script src="./tic-tac-toe.js"></script>
</head>
<body background="./Desktop - 4.png">
    <div class="heading">
        <h1>Tic-Tac-Toe</h1>
    </div>
    <div class="mainconecter">
    
        <div class="board">
            <div class="tile" data-index="0"></div>
            <div class="tile" data-index="1"></div>
            <div class="tile" data-index="2"></div>
            <div class="tile" data-index="3"></div>
            <div class="tile" data-index="4"></div>
            <div class="tile" data-index="5"></div>
            <div class="tile" data-index="6"></div>
            <div class="tile" data-index="7"></div>
            <div class="tile" data-index="8"></div>
        </div>
        
        <div class="code">

            <button onclick="showCode('py')">Python</button>
            <button onclick="showCode('js')">JavaScript</button>
            <div id="coding"></div>
        </div>

        <script>
            const pyCode = `import random

def display_board(board):
    print(f"{board[0] or ' ' } | {board[1] or ' ' } | {board[2] or ' ' }")
    print("--+---+--")
    print(f"{board[3] or ' ' } | {board[4] or ' ' } | {board[5] or ' ' }")
    print("--+---+--")
    print(f"{board[6] or ' ' } | {board[7] or ' ' } | {board[8] or ' ' }")

def show_message(msg):
    print(msg)

def check_win(board, player):
    win_combos = [
        [0, 1, 2], [3, 4, 5], [6, 7, 8],
        [0, 3, 6], [1, 4, 7], [2, 5, 8],
        [0, 4, 8], [2, 4, 6]
    ]
    return any(all(board[i] == player for i in combo) for combo in win_combos)

def is_tie(board):
    return all(cell != "" for cell in board)

def minimax(board, depth, is_maximizing, ai, human):
    scores = {ai: 10, human: -10, "tie": 0}
    
    result = ai if check_win(board, ai) else human if check_win(board, human) else "tie" if is_tie(board) else None
    if result is not None:
        return scores[result]
    
    if is_maximizing:
        best_score = -float('inf')
        for i in range(len(board)):
            if board[i] == "":
                board[i] = ai
                score = minimax(board, depth + 1, False, ai, human)
                board[i] = ""
                best_score = max(score, best_score)
        return best_score
    else:
        best_score = float('inf')
        for i in range(len(board)):
            if board[i] == "":
                board[i] = human
                score = minimax(board, depth + 1, True, ai, human)
                board[i] = ""
                best_score = min(score, best_score)
        return best_score

def best_move(board, ai, human):
    best_score = -float('inf')
    move = None
    for i in range(len(board)):
        if board[i] == "":
            board[i] = ai
            score = minimax(board, 0, False, ai, human)
            board[i] = ""
            if score > best_score:
                best_score = score
                move = i
    return move

def play_game():
    board = [""] * 9
    human, ai = "O", "X"
    current_player = human
    game_over = False

    while not game_over:
        display_board(board)
        if current_player == human:
            try:
                move = int(input("Enter your move (0-8): "))
                if board[move] == "":
                    board[move] = human
                    if check_win(board, human):
                        display_board(board)
                        show_message("Human wins!")
                        game_over = True
                    elif is_tie(board):
                        display_board(board)
                        show_message("It's a tie!")
                        game_over = True
                    else:
                        current_player = ai
            except (ValueError, IndexError):
                print("Invalid move. Try again.")
        else:
            move = best_move(board, ai, human)
            board[move] = ai
            print(f"AI chose position {move}")
            if check_win(board, ai):
                display_board(board)
                show_message("AI wins!")
                game_over = True
            elif is_tie(board):
                display_board(board)
                show_message("It's a tie!")
                game_over = True
            else:
                current_player = human

play_game()
`;
        
            const jsCode = `
window.onload = function() {
    let board = ["", "", "", "", "", "", "", "", ""];
    let human = "O";
    let ai = "X";
    let currentPlayer = human;
    const humanimg = "./0.png";
    const aiimg = "./X.png";

    const winCombos = [
        [0, 1, 2],
        [3, 4, 5],
        [6, 7, 8],
        [0, 3, 6],
        [1, 4, 7],
        [2, 5, 8],
        [0, 4, 8],
        [2, 4, 6]
    ];

    const tiles = document.querySelectorAll('.tile');
    const messageDiv = document.getElementById('message');
    const messageText = document.getElementById('message-text');
    const okButton = document.getElementById('ok-button');

    tiles.forEach(tile => tile.addEventListener('click', handleClick));
    okButton.addEventListener('click', resetGame);

    function handleClick(event) {
        const index = event.target.getAttribute('data-index');
        if (board[index] === "" && currentPlayer === human) {
            board[index] = human;
            event.target.innerHTML = \`<img src="\${humanimg}" alt="O" class="player-img"/>\`;

            if (!checkWin(board, human) && !isTie()) {
                setTimeout(() => {
                    currentPlayer = ai;
                    bestMove();
                }, 100);
            } else if (checkWin(board, human)) {
                showMessage("Human wins!");
            } else if (isTie()) {
                showMessage("It's a tie!");
            }
        }
    }

    function bestMove() {
        let bestScore = -Infinity;
        let move;
        for (let i = 0; i < board.length; i++) {
            if (board[i] === "") {
                board[i] = ai;
                let score = minimax(board, 0, false);
                board[i] = "";
                if (score > bestScore) {
                    bestScore = score;
                    move = i;
                }
            }
        }
        board[move] = ai;
        tiles[move].innerHTML = \`<img src="\${aiimg}" alt="X" class="player-img">\`;
        currentPlayer = human;
        if (checkWin(board, ai)) {
            showMessage("AI wins!");
        } else if (isTie()) {
            showMessage("It's a tie!");
        }
    }

    function showMessage(msg) {
        messageText.textContent = msg;
        messageDiv.style.display = "block";
    }

    function resetGame() {
        board = ["", "", "", "", "", "", "", "", ""];
        currentPlayer = human;
        tiles.forEach(tile => {
            tile.innerHTML = "";
        });
        messageDiv.style.display = "none";
    }

    function minimax(board, depth, isMaximizing) {
        let scores = {
            X: 10,
            O: -10,
            tie: 0
        };

        let result = checkWin(board, ai) ? ai : checkWin(board, human) ? human : isTie() ? "tie" : null;
        if (result !== null) {
            return scores[result];
        }

        if (isMaximizing) {
            let bestScore = -Infinity;
            for (let i = 0; i < board.length; i++) {
                if (board[i] === "") {
                    board[i] = ai;
                    let score = minimax(board, depth + 1, false);
                    board[i] = "";
                    bestScore = Math.max(score, bestScore);
                }
            }
            return bestScore;
        } else {
            let bestScore = Infinity;
            for (let i = 0; i < board.length; i++) {
                if (board[i] === "") {
                    board[i] = human;
                    let score = minimax(board, depth + 1, true);
                    board[i] = "";
                    bestScore = Math.min(score, bestScore);
                }
            }
            return bestScore;
        }
    }

    function checkWin(board, player) {
        return winCombos.some(combo => combo.every(index => board[index] === player));
    }

    function isTie() {
        return board.every(cell => cell !== "");
    }
};
        `;
        
        
            function showCode(language) {
                const codeDisplay = document.getElementById('coding');
                if (language === 'js') {
                    codeDisplay.innerHTML = `<pre><code>${jsCode}</code></pre>`;
                } else if (language === 'py') {
                    codeDisplay.innerHTML = `<pre><code>${pyCode}</code></pre>`;
                }
            };

            
        </script>
        
    </div>
    
    <div id="message" class="message" style="display: none;">
        <span id="message-text"></span>
        <button id="ok-button">OK</button>
    </div>
</body>
</html>
